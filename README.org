#+TITLE: Emacs Rime

[[file:https://i.imgur.com/RqJkzlx.gif]]

在 Emacs 中通过 [[https://github.com/merrickluo/liberime][liberime]] 集成 RIME 输入法，可支持多种输入方案。

* 使用方法

#+BEGIN_SRC emacs-lisp
  (use-package liberime
    :quelpa (liberime
             :fetcher github
             :repo "merrickluo/liberime"
             :files ("CMakeLists.txt" "Makefile" "src" "liberime.el")))

  (use-package rime
    :quelpa (rime
             :fetcher github
             :repo "DogLooksGood/emacs-rime"
             :files ("rime.el")))
#+END_SRC

* 设置输入中发送到 Rime 的组合键。

下面的设置，使输入过程中的 ~C-f~ 和 ~C-b~ 发送给 Rime 。可以用来配合方案中的设置完成光标移动和选字等功能。
支持 Control (C-), Meta (M-), Shift (S-)的组合键。

#+BEGIN_SRC emacs-lisp
  ;; 默认值
  (setq rime-translate-keybindings
    '("C-f" "C-b"))
#+END_SRC

* 候选框展示风格

设置 ~rime-show-candidate~ 。

| 可选值     | 说明                                                  |
|------------+-------------------------------------------------------|
| ~nil~        | 不展示                                                |
| ~minibuffer~ | 在minibuffer中展示， 推荐使用的方式                   |
| ~message~    | 直接使用 ~message~ 输出，兼容控制 ~minibuffer~ 内容的插件 |
| ~popup~      | 使用 ~popup.el~ 展示跟随的候选                          |

* 针对仓颉等具有编码注释功能的方案

目前的编码编辑功能与方案的编码注释不兼容，关闭方案中的编码注释或使用下面的设置关闭编码编辑功能。

#+BEGIN_SRC emacs-lisp
  (setq rime-input-editable nil)
#+END_SRC

* 用于展示的提示符

使用函数 ~(rime-lighter)~ 返回一个用于展示的 ~ㄓ~ 符号。 
可以通过 ~rime-indicator-face~ 和 ~rime-indicator-dim-face~ 设置样式。

* 临时英文模式的切换
如果使用模式编辑，或是需要在一些特定的场景下自动使用英文，可以 ~rime-disable-predicates~ 。

一个在 ~evil-normal-state~ 中、在英文字母后面以及代码中自动使用英文的例子。

#+BEGIN_SRC emacs-lisp
  (setq rime-disable-predicates
        '(evil-normal-state-p
          rime--after-alphabet-char-p
          rime--prog-in-code-p))
#+END_SRC

* 如果你使用 Linux 
Emacs 有一个优秀的远古BUG: 如果 ~LC_CTYPE~ 为 ~en_US.UTF8~ 的话，那么就无法调用起 Fcitx.
所以可以利用这点把 Emacs 内切换输入法的快捷键和系统快捷键设为同一个键。

* 优秀的 Emacs 输入法

你可能需要 [[https://github.com/tumashu/pyim][pyim]], [[https://github.com/merrickluo/liberime][liberime]], [[https://github.com/QiangF/liberime][erime]].
